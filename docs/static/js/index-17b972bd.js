import{_ as M,e as x,f as O,r as C,u as P,w as Q,g as r,a as z,h as i,i as b,j as E,c as n,k as d,l as t,t as V,m as u,n as U,p as A,q as D,b as $,d as q,s as G,v as H,x as J,y as W,z as X,A as S}from"./index-9181a926.js";const Y=c=>(J("data-v-0d9738d0"),c=c(),W(),c),Z={class:"login-container columnCC"},ee={class:"title-container"},se={class:"title text-center"},oe={class:"rowSC"},te={class:"svg-container"},ne=Y(()=>t("div",{class:"show-pwd"},null,-1)),ae={class:"rowSC flex-1"},le={class:"svg-container"},re={class:"tip-message"},ce=q({}),ie=Object.assign(ce,{__name:"index",setup(c){const{settings:N}=x(),_=O().formRules,a=C({keyword:"panda",password:"123456"}),v=C({otherQuery:{},redirect:void 0}),B=P(),F=e=>Object.keys(e).reduce((s,o)=>(o!=="redirect"&&(s[o]=e[o]),s),{});Q(()=>B.query,e=>{e&&(v.redirect=e.redirect,v.otherQuery=F(e))},{immediate:!0});const p=r(!1),w=r(""),g=r(null),h=()=>{g.value.validate(e=>{p.value=!0,e&&I()})},L=z(),R=x(),I=()=>{X(a).then(({data:e,statusCode:s,message:o})=>{"500".includes(s)?(S(o,"error"),loginForm.code=""):(S("登入成功"),R.setToken(`Bearer ${e==null?void 0:e.token}`),L.push("/"))}).catch(e=>{w.value=e==null?void 0:e.message}).finally(()=>{p.value=!1})},l=r("password"),y=r(null),T=()=>{l.value==="password"?l.value="":l.value="password",G(()=>{y.value.focus()})};return(e,s)=>{const o=H,m=i("el-input"),k=i("el-form-item"),j=i("el-button"),K=i("el-form");return b(),E("div",Z,[n(K,{ref_key:"refLoginForm",ref:g,class:"login-form",model:a,rules:u(_)},{default:d(()=>[t("div",ee,[t("h3",se,V(u(N).title),1)]),n(k,{prop:"keyword",rules:u(_).isNotNull("usename不能為空")},{default:d(()=>[t("div",oe,[t("span",te,[n(o,{"icon-class":"user"})]),n(m,{modelValue:a.keyword,"onUpdate:modelValue":s[0]||(s[0]=f=>a.keyword=f),placeholder:"用户名(admin)"},null,8,["modelValue"]),ne])]),_:1},8,["rules"]),n(k,{prop:"password",rules:u(_).isNotNull("密碼不能為空")},{default:d(()=>[t("div",ae,[t("span",le,[n(o,{"icon-class":"password"})]),(b(),U(m,{key:l.value,ref_key:"refPassword",ref:y,modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=f=>a.password=f),type:l.value,name:"password",placeholder:"password(123456)",onKeyup:A(h,["enter"])},null,8,["modelValue","type","onKeyup"])),t("span",{class:"show-pwd",onClick:T},[n(o,{"icon-class":l.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),t("div",re,V(w.value),1),n(j,{loading:p.value,type:"primary",class:"login-btn",size:"default",onClick:D(h,["prevent"])},{default:d(()=>[$(" Login ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}}),ue=M(ie,[["__scopeId","data-v-0d9738d0"]]);export{ue as default};
