import{_ as K,e as x,f as M,r as b,u as O,w as P,g as c,a as Q,h as i,i as C,j as z,c as o,k as d,l as s,t as V,m as u,n as E,p as U,q as A,b as D,d as q,s as G,v as H,x as J,y as W,z as X,A as Y}from"./index-769aac11.js";const Z=r=>(J("data-v-043bc396"),r=r(),W(),r),$={class:"login-container columnCC"},ee={class:"title-container"},se={class:"title text-center"},oe={class:"rowSC"},te={class:"svg-container"},ne=Z(()=>s("div",{class:"show-pwd"},null,-1)),ae={class:"rowSC flex-1"},le={class:"svg-container"},ce={class:"tip-message"},re=q({}),ie=Object.assign(re,{__name:"index",setup(r){const{settings:S}=x(),_=M().formRules,a=b({keyword:"panda",password:"123456"}),f=b({otherQuery:{},redirect:void 0}),N=O(),B=e=>Object.keys(e).reduce((t,n)=>(n!=="redirect"&&(t[n]=e[n]),t),{});P(()=>N.query,e=>{e&&(f.redirect=e.redirect,f.otherQuery=B(e))},{immediate:!0});const p=c(!1),v=c(""),w=c(null),g=()=>{w.value.validate(e=>{p.value=!0,e&&T()})},L=Q(),R=x(),T=()=>{X(a).then(({data:e})=>{Y("登录成功"),R.setToken(e==null?void 0:e.jwtToken),L.push("/")}).catch(e=>{v.value=e==null?void 0:e.msg}).finally(()=>{p.value=!1})},l=c("password"),h=c(null),j=()=>{l.value==="password"?l.value="":l.value="password",G(()=>{h.value.focus()})};return(e,t)=>{const n=H,y=i("el-input"),k=i("el-form-item"),F=i("el-button"),I=i("el-form");return C(),z("div",$,[o(I,{ref_key:"refLoginForm",ref:w,class:"login-form",model:a,rules:u(_)},{default:d(()=>[s("div",ee,[s("h3",se,V(u(S).title),1)]),o(k,{prop:"keyword",rules:u(_).isNotNull("usename不能为空")},{default:d(()=>[s("div",oe,[s("span",te,[o(n,{"icon-class":"user"})]),o(y,{modelValue:a.keyword,"onUpdate:modelValue":t[0]||(t[0]=m=>a.keyword=m),placeholder:"用户名(admin)"},null,8,["modelValue"]),ne])]),_:1},8,["rules"]),o(k,{prop:"password",rules:u(_).isNotNull("密码不能为空")},{default:d(()=>[s("div",ae,[s("span",le,[o(n,{"icon-class":"password"})]),(C(),E(y,{key:l.value,ref_key:"refPassword",ref:h,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=m=>a.password=m),type:l.value,name:"password",placeholder:"password(123456)",onKeyup:U(g,["enter"])},null,8,["modelValue","type","onKeyup"])),s("span",{class:"show-pwd",onClick:j},[o(n,{"icon-class":l.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),s("div",ce,V(v.value),1),o(F,{loading:p.value,type:"primary",class:"login-btn",size:"default",onClick:A(g,["prevent"])},{default:d(()=>[D(" Login ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}}),ue=K(ie,[["__scopeId","data-v-043bc396"]]);export{ue as default};
